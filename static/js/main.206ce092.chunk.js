(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{110:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);n(110),n(111);var c=n(0),a=n.n(c),r=n(35),s=n.n(r),o=n(22),i=n(24),l=n(92),j=n.n(l);function d(e,t){var n=Object(c.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return console.log(c),t}})),a=Object(o.a)(n,2),r=a[0],s=a[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;s(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(c){console.log(c)}}]}var u=n(45),b=n(93),h=n.n(b),O=n(143),v=n(20),f=n(58),x=n.n(f),m=n(145),p=n(146),g=n(105),_=n(5),y=m.a.Option;function w(e){var t=e.onAdd,n=Object(c.useState)({region:"us",server:"",name:""}),a=Object(o.a)(n,2),r=a[0],s=a[1];function l(e,t){s(Object(v.a)(Object(v.a)({},r),{},Object(i.a)({},e,t.target.value)))}return Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(r)},className:x.a.cont,children:[Object(_.jsx)("div",{className:x.a.field,children:Object(_.jsxs)(m.a,{style:{width:120},value:r.region,onChange:function(e,t){s(Object(v.a)(Object(v.a)({},r),{},Object(i.a)({},e,t)))}.bind(this,"region"),children:[Object(_.jsx)(y,{value:"us",children:"us"}),Object(_.jsx)(y,{value:"eu",children:"eu"}),Object(_.jsx)(y,{value:"tw",children:"tw"}),Object(_.jsx)(y,{value:"kr",children:"kr"}),Object(_.jsx)(y,{value:"cn",children:"cn"})]})}),Object(_.jsx)("div",{className:x.a.field,children:Object(_.jsx)(p.a,{type:"text",name:"server",value:r.server,placeholder:"Server",onChange:l.bind(this,"server")})}),Object(_.jsx)("div",{className:x.a.field,children:Object(_.jsx)(p.a,{type:"text",name:"char",value:r.name,placeholder:"Character",onChange:l.bind(this,"name")})}),Object(_.jsx)("div",{className:x.a.field,children:Object(_.jsx)(g.a,{type:"primary",htmlType:"submit",children:"Add"})})]})}var S=n(56),k=n(28),N=n.n(k),C=n(57),A=n(52),D=n.n(A);var F={};window.rioStats=F,console.log("See `rioStats` to view fetched RIO data.");var I,E,P,T=n(149),z=n(144),R=n(147),B=n(142),H=n(99),J={"Spires of Ascension":"soa","Theater of Pain":"top","Halls of Atonement":"hoa","The Necrotic Wake":"nw","De Other Side":"dos","Mists of Tirna Scithe":"mots","Sanguine Depths":"sd",Plaguefall:"pf"};function L(e){return J[e]}var M,Y=C.a.div(I||(I=Object(S.a)(["\n    background: #000;\n    line-height: 45px;\n    padding: 0px 22px;\n"]))),K=C.a.b(E||(E=Object(S.a)(["\n    margin-right: 1rem;\n"]))),q=C.a.span(P||(P=Object(S.a)(["\n    cursor: pointer;\n    font-family: monospace;\n"])));function G(e){var t=e.runs,n=Object(c.useState)(!1),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useMemo)((function(){var e={},n=999;return null===t||void 0===t||t.forEach((function(t){e[t.mythic_level]?e[t.mythic_level].push(t.dungeon):e[t.mythic_level]=[t.dungeon],t.mythic_level<=n&&(n=t.mythic_level)})),[e,n]}),[t]),l=Object(o.a)(i,2),j=l[0],d=l[1];Object(c.useEffect)((function(){r&&setTimeout((function(){s(!1)}),2e3)}),[r]);var u=j[d].map(L).join(" or ");return Object(_.jsxs)(Y,{children:[Object(_.jsx)(K,{children:"LFG Filter"}),Object(_.jsx)(H.CopyToClipboard,{text:u,onCopy:function(){return s(!0)},children:Object(_.jsx)(q,{children:r?"Copied!":u})})]})}var U=C.a.div(M||(M=Object(S.a)(["\n\topacity: 0.8;\n\tmargin-top: 10px;\n\tfont-size: 0.8rem;\n"])));function W(e){var t=e.char,n=e.onDelete,a=function(e){var t=function(e){return"".concat(e.region,":").concat(e.server,":").concat(e.name)}(e),n=Object(c.useState)(F),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){r[t]||(console.log("Fetching",t),D.a.get(function(e){return"https://raider.io/api/v1/characters/profile?region=".concat(e.region,"&realm=").concat(e.server,"&name=").concat(e.name,"&fields=mythic_plus_scores_by_season:current,mythic_plus_best_runs")}(e)).then((function(e){F[t]=e.data,s(Object(v.a)(Object(v.a)({},r),{},Object(i.a)({},t,e.data)))})).catch((function(e){var n;console.log(e),s(Object(v.a)(Object(v.a)({},r),{},Object(i.a)({},t,(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data)||e)))})))}),[t,e,r,s]),r[t]}(t);if(!a)return null;if(a.error)return Object(_.jsxs)(z.a,{className:N.a.card,children:[Object(_.jsx)("strong",{children:a.error}),Object(_.jsx)("p",{children:a.message}),Object(_.jsx)(T.a,{onClick:n,className:N.a.delete})]});var r=a.mythic_plus_scores_by_season[0].scores,s=a.mythic_plus_best_runs,l=Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(R.a,{src:a.thumbnail_url,className:N.a.avatar}),Object(_.jsxs)("a",{href:a.profile_url,target:"_blank",rel:"noreferrer",className:N.a.avatarAnnex,children:[Object(_.jsx)("strong",{children:a.name}),Object(_.jsxs)("small",{style:{marginLeft:"10px"},children:[a.race," ",a.class]})]})]});return Object(_.jsxs)(z.a,{className:N.a.card,children:[Object(_.jsx)(z.a.Meta,{title:l}),Object(_.jsx)("h3",{className:N.a.mainScore,children:r.all}),Object(_.jsx)("h3",{className:N.a.avatarAnnex,children:Object(_.jsx)(T.a,{onClick:n,className:N.a.icon})}),r.tank?Object(_.jsxs)("span",{className:N.a.subscore,children:[Object(_.jsx)("strong",{children:"Tank"}),": ",r.tank]}):null,r.healer?Object(_.jsxs)("span",{className:N.a.subscore,children:[Object(_.jsx)("strong",{children:"Healer"}),": ",r.healer]}):null,r.dps?Object(_.jsxs)("span",{className:N.a.subscore,children:[Object(_.jsx)("strong",{children:"DPS"}),": ",r.dps]}):null,Object(_.jsx)(B.a,{}),Object(_.jsxs)("div",{className:N.a.grid,children:[Object(_.jsx)("div",{children:Object(_.jsx)("strong",{children:"Dungeon"})}),Object(_.jsx)("div",{children:Object(_.jsx)("strong",{children:"Level"})}),Object(_.jsx)("div",{children:Object(_.jsx)("strong",{children:"Score"})}),Object(_.jsx)("div",{children:Object(_.jsx)("strong",{children:"+?"})}),s.map((function(e){return Object(_.jsxs)(c.Fragment,{children:[Object(_.jsx)("div",{children:e.dungeon}),Object(_.jsx)("div",{children:e.mythic_level}),Object(_.jsx)("div",{children:e.score}),Object(_.jsx)("div",{children:e.num_keystone_upgrades})]},e.dungeon)}))]}),Object(_.jsxs)(U,{children:["Last crawled at ",new Date(a.last_crawled_at).toLocaleString()]}),Object(_.jsx)("div",{className:N.a.onHover,children:Object(_.jsx)(G,{runs:s})})]})}var X=O.a.Content;var Q,V=new FormData;function Z(){var e,t=d("auth_token"),n=Object(o.a)(t,2),c=n[0],a=n[1];return c||(e=a,Q||(Q=D()({method:"post",url:"https://www.warcraftlogs.com/oauth/token",data:V,headers:{"Content-Type":"multipart/form-data"},auth:{username:"939c7296-5335-40c4-9338-b213bfcadc92",password:"1SyEyndtXPGyQIXWPz4w4dheqOeKSKk22hBCQzUP"}})),Q.then((function(t){e(t.data.access_token)})).catch((function(t){console.error(t),e(t.response.data)}))),c}V.append("grant_type","client_credentials");var $,ee=[];var te=function(e){var t=e.name,n=e.server,c=e.region;return'\n{\n\tcharacterData {\n\t\tcharacter(\n\t\t\tname: "'.concat(t,'"\n\t\t\tserverSlug: "').concat(n,'"\n\t\t\tserverRegion: "').concat(c,'"\n\t\t) {\n\t\t\tzoneRankings(\n\t\t\t\tdifficulty: 4\n\t\t\t\tzoneID: 26\n\t\t\t)\n\t\t}\n\t}\n}\n')},ne={};function ce(e){var t=Z(),n=Object(c.useState)({}),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var n={headers:{Authorization:"Bearer ".concat(t)}};e.forEach((function(e){var t=function(e){return"".concat(e.region,":").concat(e.server,":").concat(e.name)}(e);ne[t]?r[t]||s((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(i.a)({},t,ne[t]))})):(ne[t]={isFetching:!0},s((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(i.a)({},t,ne[t]))})),D.a.post("https://www.warcraftlogs.com/api/v2/client",{query:te(e)},n).then((function(n){var c,a,r,o=null===n||void 0===n||null===(c=n.data)||void 0===c||null===(a=c.data)||void 0===a||null===(r=a.characterData)||void 0===r?void 0:r.character;ne[t]=o?Object(v.a)(Object(v.a)({},o),{},{name:e.name}):{message:"Found no character stats"},function(e){if("function"!==typeof e)throw new Error("Unknown job type. Jobs must be functions.");ee.push(e),$||($=requestIdleCallback((function(){ee.length>0&&ee.forEach((function(e){e()})),ee=[],$=void 0})))}((function(){return s((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(i.a)({},t,ne[t]))}))}))})).catch(console.error))}))}),[e,t,s,r]),r}window.wlDPSStats=ne,console.log("See `wlDPSStats` to view fetched RIO data.");var ae=O.a.Content;function re(){var e=this,t=d("warcraftlogs",[]),n=Object(o.a)(t,2),a=n[0],r=n[1],s=ce(a),l=Object(c.useState)({}),j=Object(o.a)(l,2),b=j[0],h=j[1];function O(e){r([].concat(Object(u.a)(a.slice(0,e)),Object(u.a)(a.slice(e+1))))}return Object(c.useEffect)((function(){var e=function(e,t){var n=e.byBoss,c=void 0===n?{}:n,a=e.bosses,r=void 0===a?{}:a,s=c,o=r;for(var l in t){var j,d=t[l];if(!d.isFetching){var u=d.name,b=null===(j=d.zoneRankings)||void 0===j?void 0:j.rankings;c[u]||(s===c&&(s=Object(v.a)({},c)),s[u]=null===b||void 0===b?void 0:b.map((function(e){var t=e.encounter.name;return r[t]||(o===r&&(o=Object(v.a)({},r)),o=Object(v.a)(Object(v.a)({},o),{},Object(i.a)({},t,!0))),{boss:t,bestAmount:e.bestAmount}})))}}return s!==c||o!==r?{byBoss:s,bosses:o}:e}(b,s);e!==b&&h(e)}),[b,s]),console.log(b),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h1",{children:"Under construction"}),Object(_.jsx)(ae,{style:{padding:"20px 50px"},children:Object(_.jsx)(w,{onAdd:function(e){r([].concat(Object(u.a)(a),[e]))}})}),Object(_.jsx)(ae,{style:{padding:"0 50px 20px"},children:a&&a.map((function(t,n){return Object(_.jsxs)("div",{children:[Object(_.jsx)("pre",{children:JSON.stringify(t,void 0,"  ")}),Object(_.jsx)("button",{onClick:O.bind(e,n),children:"delete"})]},n)}))})]})}var se,oe=n(148),ie=O.a.Header,le="rio",je="wcl",de=(se={},Object(i.a)(se,le,(function(){var e=this,t=d("raiderio",[]),n=Object(o.a)(t,2),c=n[0],a=n[1];function r(e){a([].concat(Object(u.a)(c.slice(0,e)),Object(u.a)(c.slice(e+1))))}return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(X,{style:{padding:"20px 50px"},children:Object(_.jsx)(w,{onAdd:function(e){a([].concat(Object(u.a)(c),[e]))}})}),Object(_.jsx)(X,{className:h.a.cards,children:c&&c.map((function(t,n){return Object(_.jsx)(W,{char:t,onDelete:r.bind(e,n)},n)}))})]})})),Object(i.a)(se,je,(function(){return Object(_.jsx)(re,{})})),se);var ue=function(){var e=d("selectedTab",[le]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=de[n[0]];return Object(_.jsxs)(O.a,{className:j.a.app,children:[Object(_.jsx)(ie,{children:Object(_.jsxs)(oe.a,{theme:"dark",mode:"horizontal",selectedKeys:n,onClick:function(e){var t=e.keyPath;c(t)},children:[Object(_.jsx)(oe.a.Item,{children:"Raider.IO"},le),Object(_.jsx)(oe.a.Item,{children:"Warcraft Logs"},je)]})}),Object(_.jsx)(a,{})]})};s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(ue,{})}),document.getElementById("root"))},28:function(e,t,n){e.exports={avatarAnnex:"char_avatarAnnex__35AYj",avatar:"char_avatar__282x6",card:"char_card__3aviT",icon:"char_icon__21VfR",onHover:"char_onHover__1KYtY",mainScore:"char_mainScore__1aO3A",delete:"char_delete__3YpGC",subscore:"char_subscore__3uPcB",grid:"char_grid__2A1i_"}},58:function(e,t,n){e.exports={cont:"addchar_cont__2VDMy",field:"addchar_field__3SYcZ"}},92:function(e,t,n){e.exports={app:"app_app__1F5XI"}},93:function(e,t,n){e.exports={cards:"raiderio_cards__1vhFy"}}},[[140,1,2]]]);
//# sourceMappingURL=main.206ce092.chunk.js.map