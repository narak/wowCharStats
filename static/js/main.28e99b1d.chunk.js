(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{122:function(e,t,n){e.exports={cont:"zoneselector_cont__19IuZ",field:"zoneselector_field__1UOPE"}},155:function(e,t,n){e.exports={app:"app_app__1F5XI"}},156:function(e,t,n){e.exports={cards:"raiderio_cards__1vhFy"}},174:function(e,t,n){},279:function(e,t,n){"use strict";n.r(t);n(174),n(175);var a=n(0),c=n.n(a),r=n(29),s=n.n(r),o=n(22),i=n(23),l=n(155),j=n.n(l);function d(e,t){e="wcs::"+e;var n=Object(a.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),c=Object(o.a)(n,2),r=c[0],s=c[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;s(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]}var u=n(63),b=n(156),h=n.n(b),O=n(282),f=n(20),v=n(89),m=n.n(v),x=n(157),p=n.n(x),g=n(95),y=n(285),_=n(82),w=n(35),S=n(6),C=g.a.Option;function k(e){var t=e.onAdd,n=Object(a.useState)({region:"us",server:"frostmourne",name:""}),c=Object(o.a)(n,2),r=c[0],s=c[1];function l(e,t){s(Object(f.a)(Object(f.a)({},r),{},Object(i.a)({},e,t.target.value)))}return Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(r)},className:m.a.cont,children:[Object(S.jsx)("div",{className:m.a.field,children:Object(S.jsxs)(g.a,{style:{width:120},value:r.region,onChange:function(e,t){s(Object(f.a)(Object(f.a)({},r),{},Object(i.a)({},e,t)))}.bind(this,"region"),children:[Object(S.jsx)(C,{value:"us",children:"us"}),Object(S.jsx)(C,{value:"eu",children:"eu"}),Object(S.jsx)(C,{value:"tw",children:"tw"}),Object(S.jsx)(C,{value:"kr",children:"kr"}),Object(S.jsx)(C,{value:"cn",children:"cn"})]})}),Object(S.jsx)("div",{className:m.a.field,children:Object(S.jsx)(y.a,{type:"text",name:"server",value:r.server,placeholder:"Server",onChange:l.bind(this,"server")})}),Object(S.jsx)("div",{className:m.a.field,children:Object(S.jsx)(_.a,{placement:"bottom",title:"You can paste your WarcraftLogs, Raider.IO or WoW Armory link in here to auto add.",children:Object(S.jsx)(y.a,{type:"text",name:"char",value:r.name,placeholder:"Character",onChange:function(e){var n=e.target.value;if(/^http.*/i.test(n)){var a=p.a.parse(n),c=a.path,r=a.hostname,s=c.split("/");if(/warcraftlogs/i.test(r)){var i=Object(o.a)(s,5),j=i[2],d=i[3],u=i[4];t({region:j,server:d,name:u})}else if(/raider\.io/i.test(r)){var b=Object(o.a)(s,5),h=b[2],O=b[3],f=b[4];t({region:h,server:O,name:f})}else if(/worldofwarcraft/i.test(r)){var v=Object(o.a)(s,6),m=v[3],x=v[4],g=v[5];t({region:m,server:x,name:g})}}else l("name",e)}})})}),Object(S.jsx)("div",{className:m.a.field,children:Object(S.jsx)(w.a,{type:"primary",htmlType:"submit",children:"Add"})})]})}var N=n(87),F=n(37),D=n.n(F),T=n(88),P=n(78),z=n.n(P);var A={};window.rioStats=A,console.log("See `rioStats` to view fetched RIO data.");var I,M,L,R=n(289),E=n(284),H=n(287),B=n(281),W=n(112),J={"Spires of Ascension":"soa","Theater of Pain":"top","Halls of Atonement":"hoa","The Necrotic Wake":"nw","De Other Side":"dos","Mists of Tirna Scithe":"mots","Sanguine Depths":"sd",Plaguefall:"pf"};function K(e){return J[e]}var Y,G=T.a.div(I||(I=Object(N.a)(["\n    background: #000;\n    line-height: 45px;\n    padding: 0px 22px;\n"]))),U=T.a.b(M||(M=Object(N.a)(["\n    margin-right: 1rem;\n"]))),X=T.a.span(L||(L=Object(N.a)(["\n    cursor: pointer;\n    font-family: monospace;\n"])));function Z(e){var t=e.runs,n=Object(a.useState)(!1),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useMemo)((function(){var e={},n=999;return null===t||void 0===t||t.forEach((function(t){e[t.mythic_level]?e[t.mythic_level].push(t.dungeon):e[t.mythic_level]=[t.dungeon],t.mythic_level<=n&&(n=t.mythic_level)})),[e,n]}),[t]),l=Object(o.a)(i,2),j=l[0],d=l[1];Object(a.useEffect)((function(){r&&setTimeout((function(){s(!1)}),2e3)}),[r]);var u=j[d].map(K).join(" or ");return Object(S.jsxs)(G,{children:[Object(S.jsx)(U,{children:"LFG Filter"}),Object(S.jsx)(W.CopyToClipboard,{text:u,onCopy:function(){return s(!0)},children:Object(S.jsx)(X,{children:r?"Copied!":u})})]})}var q=T.a.div(Y||(Y=Object(N.a)(["\n\topacity: 0.8;\n\tmargin-top: 10px;\n\tfont-size: 0.8rem;\n"])));function Q(e){var t=e.char,n=e.onDelete,c=function(e){var t=function(e){return"".concat(e.region,":").concat(e.server,":").concat(e.name)}(e),n=Object(a.useState)(A),c=Object(o.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){r[t]||(console.log("Fetching",t),z.a.get(function(e){return"https://raider.io/api/v1/characters/profile?region=".concat(e.region,"&realm=").concat(e.server,"&name=").concat(e.name,"&fields=mythic_plus_scores_by_season:current,mythic_plus_best_runs")}(e)).then((function(e){console.log("resp",e),A[t]=e.data,s(Object(f.a)(Object(f.a)({},r),{},Object(i.a)({},t,e.data)))})).catch((function(e){var n;console.log(e),s(Object(f.a)(Object(f.a)({},r),{},Object(i.a)({},t,(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data)||e)))})))}),[t,e,r,s]),r[t]}(t);if(!c)return null;if(c.error)return Object(S.jsxs)(E.a,{className:D.a.card,children:[Object(S.jsx)("strong",{children:c.error}),Object(S.jsx)("p",{children:c.message}),Object(S.jsx)(R.a,{onClick:n,className:D.a.delete})]});var r=c.mythic_plus_scores_by_season[0].scores,s=c.mythic_plus_best_runs,l=Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(H.a,{src:c.thumbnail_url,className:D.a.avatar}),Object(S.jsxs)("a",{href:c.profile_url,target:"_blank",rel:"noreferrer",className:D.a.avatarAnnex,children:[Object(S.jsx)("strong",{children:c.name}),Object(S.jsxs)("small",{style:{marginLeft:"10px"},children:[c.race," ",c.class]})]})]});return Object(S.jsxs)(E.a,{className:D.a.card,children:[Object(S.jsx)(E.a.Meta,{title:l}),Object(S.jsx)("h3",{className:D.a.mainScore,children:r.all}),Object(S.jsx)("h3",{className:D.a.avatarAnnex,children:Object(S.jsx)(R.a,{onClick:n,className:D.a.icon})}),r.tank?Object(S.jsxs)("span",{className:D.a.subscore,children:[Object(S.jsx)("strong",{children:"Tank"}),": ",r.tank]}):null,r.healer?Object(S.jsxs)("span",{className:D.a.subscore,children:[Object(S.jsx)("strong",{children:"Healer"}),": ",r.healer]}):null,r.dps?Object(S.jsxs)("span",{className:D.a.subscore,children:[Object(S.jsx)("strong",{children:"DPS"}),": ",r.dps]}):null,Object(S.jsx)(B.a,{}),Object(S.jsxs)("div",{className:D.a.grid,children:[Object(S.jsx)("div",{children:Object(S.jsx)("strong",{children:"Dungeon"})}),Object(S.jsx)("div",{children:Object(S.jsx)("strong",{children:"Level"})}),Object(S.jsx)("div",{children:Object(S.jsx)("strong",{children:"Score"})}),Object(S.jsx)("div",{children:Object(S.jsx)("strong",{children:"+?"})}),s.map((function(e){return Object(S.jsxs)(a.Fragment,{children:[Object(S.jsx)("div",{children:e.dungeon}),Object(S.jsx)("div",{children:e.mythic_level}),Object(S.jsx)("div",{children:e.score}),Object(S.jsx)("div",{children:e.num_keystone_upgrades})]},e.dungeon)}))]}),Object(S.jsxs)(q,{children:["Last crawled at ",new Date(c.last_crawled_at).toLocaleString()]}),Object(S.jsx)("div",{className:D.a.onHover,children:Object(S.jsx)(Z,{runs:s})})]})}var V,$,ee,te,ne=O.a.Content;var ae,ce={SOD:"SOD",CN:"CN"},re=(V={},Object(i.a)(V,ce.SOD,"Sanctum of Domination"),Object(i.a)(V,ce.CN,"Castle Nathria"),V),se=($={},Object(i.a)($,ce.SOD,28),Object(i.a)($,ce.CN,26),$),oe={Mythic:"Mythic",Heroic:"Heroic",Normal:"Normal",LFR:"LFR"},ie=(ee={},Object(i.a)(ee,oe.Mythic,"Mythic"),Object(i.a)(ee,oe.Heroic,"Heroic"),Object(i.a)(ee,oe.Normal,"Normal"),Object(i.a)(ee,oe.LFR,"LFR"),ee),le=(te={},Object(i.a)(te,oe.Mythic,5),Object(i.a)(te,oe.Heroic,4),Object(i.a)(te,oe.Normal,3),Object(i.a)(te,oe.LFR,1),te),je=new FormData;function de(){var e,t=d("auth_token"),n=Object(o.a)(t,2),a=n[0],c=n[1];return a||(e=c,ae||(ae=z()({method:"post",url:"https://www.warcraftlogs.com/oauth/token",data:je,headers:{"Content-Type":"multipart/form-data"},auth:{username:"939c7296-5335-40c4-9338-b213bfcadc92",password:"1SyEyndtXPGyQIXWPz4w4dheqOeKSKk22hBCQzUP"}})),ae.then((function(t){e(t.data.access_token)})).catch((function(t){console.error(t),e(t.response.data)}))),a}je.append("grant_type","client_credentials");var ue=function(e,t){var n=e.id,a=e.difficulty,c=t.name,r=t.server,s=t.region;return'\n{\n\tcharacterData {\n\t\tcharacter(\n\t\t\tname: "'.concat(c,'"\n\t\t\tserverSlug: "').concat(r,'"\n\t\t\tserverRegion: "').concat(s,'"\n\t\t) {\n\t\t\tzoneRankings(\n\t\t\t\tdifficulty: ').concat(le[a],"\n\t\t\t\tzoneID: ").concat(se[n],"\n\t\t\t\trole: DPS\n\t\t\t\tmetric: dps\n\t\t\t)\n\t\t}\n\t}\n}\n")},be={};window.wlCharStats=be,console.log("See `wlCharStats` to view fetched RIO data.");var he={"The Tarragrue":"Tarragrue","The Eye of the Jailer":"The Eye","The Nine":"The Nine","Remnant of Ner'zhul":"Ner'zhul","Soulrender Dormazain":"Soulrender","Painsmith Raznal":"Painsmith","Guardian of the First Ones":"Guardian","Fatescribe Roh-Kalo":"Fatescribe","Kel'Thuzad":"KT","Sylvanas Windrunner":"Sylvanas"};function Oe(e){var t=e.region,n=e.server,a=e.name,c=e.difficulty,r=e.zoneId;return"https://www.warcraftlogs.com/character/".concat(t,"/").concat(n,"/").concat(a,"#difficulty=").concat(le[c],"&zone=").concat(se[r])}var fe=n(283),ve=n(122),me=n.n(ve),xe=g.a.Option,pe=Object.keys(ce),ge=Object.keys(oe);function ye(e){var t=e.value,n=e.onChange,a=t.id,c=t.difficulty;return Object(S.jsxs)("div",{className:me.a.cont,children:[Object(S.jsx)("div",{className:me.a.field,children:Object(S.jsx)(g.a,{style:{width:240},value:a,onChange:function(e){n(Object(f.a)(Object(f.a)({},t),{},{id:e}))},children:pe.map((function(e){return Object(S.jsx)(xe,{value:e,children:re[e]},e)}))})}),Object(S.jsx)("div",{className:me.a.field,children:Object(S.jsx)(g.a,{style:{width:160},value:c,onChange:function(e){n(Object(f.a)(Object(f.a)({},t),{},{difficulty:e}))},children:ge.map((function(e){return Object(S.jsx)(xe,{value:e,children:ie[e]},e)}))})})]})}var _e=g.a.Option;function we(e){var t=e.bosses,n=void 0===t?[]:t,a=e.value,c=void 0===a?[]:a,r=e.onChange;return Object(S.jsx)("div",{children:Object(S.jsx)(g.a,{mode:"multiple",allowClear:!0,style:{minWidth:700},value:c,onChange:r,placeholder:"Select Bosses",children:n.map((function(e){return Object(S.jsx)(_e,{children:e},e)}))})})}var Se=n(286),Ce=n(288),ke=y.a.TextArea;function Ne(e){var t=e.chars,n=e.setChars,c=Object(a.useState)(!1),r=Object(o.a)(c,2),s=r[0],i=r[1],l=Object(a.useState)(!1),j=Object(o.a)(l,2),d=j[0],u=j[1],b=Object(a.useState)(""),h=Object(o.a)(b,2),O=h[0],f=h[1],v=Object(a.useState)(),m=Object(o.a)(v,2),x=m[0],p=m[1];return Object(a.useEffect)((function(){s&&setTimeout((function(){i(!1)}),2e3)}),[s]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(Se.a,{title:"Paste Config",visible:d,onOk:function(){try{n(JSON.parse(O)),u(!1)}catch(x){p(x),console.log(x)}},onCancel:function(){return u(!1)},children:[x?Object(S.jsx)(Ce.a,{message:"Unable to parse config",type:"error"}):null,Object(S.jsx)(ke,{rows:15,value:O,onChange:function(e){f(e.target.value),p(void 0)}})]}),Object(S.jsx)(W.CopyToClipboard,{text:Object(a.useMemo)((function(){return JSON.stringify(t)}),[t]),onCopy:function(){return i(!0)},children:Object(S.jsx)(w.a,{children:s?"Copied!":"Copy"})}),Object(S.jsx)(w.a,{onClick:function(){return u(!0)},children:"Paste"})]})}var Fe=O.a.Content;function De(e){return e.replace(/-|\s/g,"").toLowerCase()}function Te(){var e=this,t=d("wlTrackedChars",[]),n=Object(o.a)(t,2),c=n[0],r=n[1],s=d("wlZone",{id:ce.SOD,difficulty:oe.Heroic}),l=Object(o.a)(s,2),j=l[0],b=l[1],h=j.id,O=d("wlBosses",{}),v=Object(o.a)(O,2),m=v[0],x=v[1],p=function(e){var t=e.zone,n=e.chars,c=de(),r=Object(a.useState)({}),s=Object(o.a)(r,2),l=s[0],j=s[1],d=Object(a.useState)(t),u=Object(o.a)(d,2),b=u[0],h=u[1];return t!==b&&(h(t),j({})),Object(a.useEffect)((function(){var e={headers:{Authorization:"Bearer ".concat(c)}};n.forEach((function(n){var a=function(e,t){var n=e.id,a=e.difficulty,c=t.name,r=t.server,s=t.region;return"".concat(n,":").concat(a,":").concat(s,":").concat(r,":").concat(c)}(t,n);be[a]?l[a]||j((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(i.a)({},a,be[a]))})):(be[a]={isFetching:!0},j((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(i.a)({},a,be[a]))})),z.a.post("https://www.warcraftlogs.com/api/v2/client",{query:ue(t,n)},e).then((function(e){var c,r,s,o,l=null===e||void 0===e||null===(c=e.data)||void 0===c||null===(r=c.data)||void 0===r||null===(s=r.characterData)||void 0===s?void 0:s.character;be[a]=l?Object(f.a)(Object(f.a)(Object(f.a)({},l),t),n):Object(f.a)(Object(f.a)({message:"Found no character stats",isError:!0},t),n),(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.errors)&&console.error(e.data.errors.map((function(e){return e.message}))),j((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(i.a)({},a,be[a]))}))})).catch(console.error))}))}),[t,n,c,l]),l}({zone:j,chars:c}),g=m[h]&&m[h].length?m[h].reduce((function(e,t){return e[t]=!0,e}),{}):null,y=Object(a.useMemo)((function(){return function(e){var t={},n={};for(var a in e){var c,r=e[a];if(!r.isFetching){var s=r.name,o=null===(c=r.zoneRankings)||void 0===c?void 0:c.rankings;t[s]=o?o.map((function(e){var t=e.encounter.name;return n[t]||(n[t]=!0),{boss:t,bestAmount:e.bestAmount,bestSpec:e.bestSpec,rankPercent:e.rankPercent}})):r.isError?r:void 0}}return{byBoss:t,bosses:Object.keys(n)}}(p)}),[p]);window.wlDPSStats=y;var C=Object(a.useCallback)((function(e){r(c.filter((function(t){return t.name!==e})))}),[r,c]),N=Object(a.useMemo)((function(){return function(e){var t,n=this,a=e.stats,c=e.bossMap,r=e.onDelete;return t=a.bosses.length?a.bosses.reduce((function(e,t){return c&&!c[t]||e.push({title:he[t],dataIndex:t,key:t,render:function(e,n,a){var c=n[t];return 0===+c.value?"-":Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(_.a,{placement:"bottom",title:"".concat(c.rankPercent,"%"),children:c.value}),Object(S.jsx)("br",{}),Object(S.jsx)("small",{children:c.spec})]})},sorter:function(e,n){return e[t].value-n[t].value}}),e}),[]):[],[{title:"Name",dataIndex:"name",key:"name",fixed:"left",render:function(e,t){return Object(S.jsx)("a",{href:Oe(t),target:"_blank",rel:"noreferrer",children:t.name})}}].concat(Object(u.a)(t),[{dataIndex:"action",key:"action",fixed:"right",width:"50px",render:function(e,t){return Object(S.jsx)(R.a,{onClick:r.bind(n,t.name)})}}])}({stats:y,bossMap:g,onDelete:C})}),[y,g,C]),F=Object(a.useMemo)((function(){return function(e){var t=e.stats,n=e.chars,a=e.bossMap,c=e.id,r=e.difficulty,s=[],o=[];return t.bosses.length&&n.forEach((function(e){var n=e.name,i=t.byBoss[n];i&&!i.isError?s.push(Object(f.a)(Object(f.a)({name:n,key:n,zoneId:c,difficulty:r},e),i.reduce((function(e,t){var n;return a&&!a[t.boss]||(e[t.boss]={value:t.bestAmount.toFixed(2),spec:t.bestSpec,rankPercent:null===(n=t.rankPercent)||void 0===n?void 0:n.toFixed(2)}),e}),{}))):o.push(i)})),[s,o]}(Object(f.a)({stats:y,chars:c,bossMap:g},j))}),[y,c,g,j]),D=Object(o.a)(F,2),T=D[0],P=D[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Fe,{style:{padding:"50px 50px 10px"},children:Object(S.jsx)(k,{onAdd:function(e){var t=e.name,n=e.server,a=e.region;t=t.toLowerCase(),n=De(n),a=a.toLowerCase(),c.some((function(e){var c=De(e.server);return e.name.toLowerCase()===t&&c===n&&e.region.toLowerCase()===a&&(console.warn("User already exists"),!0)}))||r([].concat(Object(u.a)(c),[e]))}})}),Object(S.jsx)(Fe,{style:{padding:"10px 50px"},children:Object(S.jsx)(ye,{value:j,onChange:b})}),Object(S.jsx)(Fe,{style:{padding:"10px 50px 10px"},children:Object(S.jsx)(we,{bosses:y&&y.bosses?y.bosses:void 0,value:m[h],onChange:function(e){x(Object(f.a)(Object(f.a)({},m),{},Object(i.a)({},h,e)))}})}),Object(S.jsx)(Fe,{style:{padding:"20px 50px"},children:Object(S.jsx)(Ne,{chars:c,setChars:r})}),Object(S.jsxs)(Fe,{style:{padding:"10px 50px 50px"},children:[P.length?Object(S.jsxs)("div",{style:{padding:"0 1px"},children:[Object(S.jsx)("strong",{children:"Failed to fetch"}),":"," ",P.map((function(t){return t?Object(S.jsx)(w.a,{type:"text",onClick:C.bind(e,t.name),children:t.name}):null}))]}):null,Object(S.jsx)(fe.a,{dataSource:T,columns:N,pagination:!1,scroll:{x:1440,y:750}})]})]})}console.log("See `wlDPSStats` to view consolidated stats.");var Pe,ze=n(69),Ae=O.a.Header,Ie="rio",Me="wcl",Le=(Pe={},Object(i.a)(Pe,Ie,(function(){var e=this,t=d("raiderio",[]),n=Object(o.a)(t,2),a=n[0],c=n[1];function r(e){c([].concat(Object(u.a)(a.slice(0,e)),Object(u.a)(a.slice(e+1))))}return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ne,{style:{padding:"20px 50px"},children:Object(S.jsx)(k,{onAdd:function(e){c([].concat(Object(u.a)(a),[e]))}})}),Object(S.jsx)(ne,{className:h.a.cards,children:a&&a.map((function(t,n){return Object(S.jsx)(Q,{char:t,onDelete:r.bind(e,n)},n)}))})]})})),Object(i.a)(Pe,Me,(function(){return Object(S.jsx)(Te,{})})),Pe);var Re=function(){var e=d("selectedTab",[Ie]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Le[n[0]];return Object(S.jsxs)(O.a,{className:j.a.app,children:[Object(S.jsx)(Ae,{children:Object(S.jsxs)(ze.a,{theme:"dark",mode:"horizontal",selectedKeys:n,onClick:function(e){var t=e.keyPath;a(t)},children:[Object(S.jsx)(ze.a.Item,{children:"Raider.IO"},Ie),Object(S.jsx)(ze.a.Item,{children:"Warcraft Logs"},Me)]})}),Object(S.jsx)(c,{})]})};s.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(Re,{})}),document.getElementById("root"))},37:function(e,t,n){e.exports={avatarAnnex:"char_avatarAnnex__35AYj",avatar:"char_avatar__282x6",card:"char_card__3aviT",icon:"char_icon__21VfR",onHover:"char_onHover__1KYtY",mainScore:"char_mainScore__1aO3A",delete:"char_delete__3YpGC",subscore:"char_subscore__3uPcB",grid:"char_grid__2A1i_"}},89:function(e,t,n){e.exports={cont:"addchar_cont__2VDMy",field:"addchar_field__3SYcZ"}}},[[279,1,2]]]);
//# sourceMappingURL=main.28e99b1d.chunk.js.map